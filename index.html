<!-- Contact Form -->
<div id="contact-container" style="max-width:500px;margin:auto;font-family:Arial,sans-serif;">
  <h2>Contact Us</h2>
  <form id="contact-form">
    <label for="name">Name</label>
    <input type="text" id="name" name="name" placeholder="Your Name" required style="width:100%;padding:8px;margin-bottom:10px;">

    <label for="email">Email</label>
    <input type="email" id="email" name="email" placeholder="Your Email" required style="width:100%;padding:8px;margin-bottom:10px;">

    <label for="message">Message</label>
    <textarea id="message" name="message" placeholder="Your Message" required style="width:100%;padding:8px;margin-bottom:10px;"></textarea>

    <input type="hidden" id="g-recaptcha-response" name="g-recaptcha-response">
    <button type="submit" style="padding:10px 20px;background-color:#007bff;color:white;border:none;cursor:pointer;">Send Message</button>
  </form>

  <div id="form-result" style="margin-top:15px;font-weight:bold;"></div>
</div>

<!-- reCAPTCHA v3 -->
<script src="https://www.google.com/recaptcha/api.js?render=6LcVKcorAAAAAL0ARL06YWmUvnKqZAAPT_E9sukN"></script>

<script>
document.getElementById('contact-form').addEventListener('submit', function(e) {
    e.preventDefault();
    const resultDiv = document.getElementById('form-result');
    resultDiv.style.color = 'black';
    resultDiv.innerText = 'Sending...';

    grecaptcha.ready(function() {
        grecaptcha.execute('6LcVKcorAAAAAL0ARL06YWmUvnKqZAAPT_E9sukN', {action: 'contact'}).then(function(token) {
            document.getElementById('g-recaptcha-response').value = token;

            const formData = new FormData(e.target);

            fetch('https://contact.megaliberta.com/contact.php', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                if (data.status === 'success') {
                    resultDiv.style.color = 'green';
                    e.target.reset();
                } else {
                    resultDiv.style.color = 'red';
                }
                resultDiv.innerText = data.message;
            })
            .catch(err => {
                resultDiv.style.color = 'red';
                resultDiv.innerText = 'An error occurred. Please try again.';
                console.error(err);
            });
        });
    });
});
</script>

