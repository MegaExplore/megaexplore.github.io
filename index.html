<form id="contactForm" method="POST" action="https://megalibertacontactform.chrisperolla.workers.dev/">
  <input type="text" name="name" placeholder="Name" required>
  <input type="email" name="email" placeholder="Email" required>
  <textarea name="message" placeholder="Message" required></textarea>

  <!-- Hidden field for reCAPTCHA v3 token -->
  <input type="hidden" id="recaptchaToken" name="recaptcha_token">

  <button type="submit">Send</button>
</form>

<!-- Load reCAPTCHA v3 -->
<script src="https://www.google.com/recaptcha/api.js?render=6LfhXMcrAAAAACoW5p2fE_H4jOarfRtsNinFkCuf"></script>
<script>
  const form = document.getElementById('contactForm');
  form.addEventListener('submit', function (event) {
    event.preventDefault(); // stop normal submit

    grecaptcha.ready(function() {
      grecaptcha.execute('6LfhXMcrAAAAACoW5p2fE_H4jOarfRtsNinFkCuf', {action: 'submit'}).then(function(token) {
        document.getElementById('recaptchaToken').value = token;
        form.submit(); // now submit with the token included
      });
    });
  });
</script>

